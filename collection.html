<html>

<!--
  pgn4web javascript chessboard
  copyright (C) 2009, 2010 Paolo Casaschi
  see README file and http://pgn4web.casaschi.net
  for credits, license and more details
-->

<head>

<title>chess games</title>

<link href="collection.css" type="text/css" rel="stylesheet" />

<link rel="shortcut icon" href="pawn.ico" />

<script src="pgn4web.js" type="text/javascript"></script>
<script type="text/javascript">

   thisRegExp = /(&|\?)(help|h)([^&$]*)(&|$)/i;
   if (window.location.search.match(thisRegExp) !== null) {
       alert("pgn4web collection.html parameters" + "\n" +
             " - pgnFile=filename.pgn" + "\n" +
	     " - title=page title" + "\n" +
	     " - search=search expression" + "\n" +
             " - help");
   }
   pgnFilename = "";
   thisRegExp = /(&|\?)(pgnFile|pf)=([^&$]*)(&|$)/i;
   if (window.location.search.match(thisRegExp) !== null) {
       pgnFilename = unescape(window.location.search.match(thisRegExp)[3]);
   } else {
       // accepts pgnData as alias for pgnFile for consistency with board.html
       thisRegExp = /(&|\?)(pgnData|pd)=([^&$]*)(&|$)/i;
       if (window.location.search.match(thisRegExp) !== null) {
           pgnFilename = unescape(window.location.search.match(thisRegExp)[3]);
       }
   } 
   if (pgnFilename === "") {
       pgnTitle = "no PGN file loaded";
   } else {
       SetPgnUrl(pgnFilename); // if set, this has precedence over the inline PGN in the HTML file
       pgnTitle = pgnFilename;
   }
   thisRegExp = /(&|\?)(title|t)=([^&$]*)(&|$)/i;
   if (window.location.search.match(thisRegExp) !== null) {
       pgnTitle = unescape(window.location.search.match(thisRegExp)[3]);
   }
   document.title = "chess games: " + pgnTitle;
   thisRegExp = /(&|\?)(search|s)=([^&$]*)(&|$)/i;
   if (window.location.search.match(thisRegExp) !== null) {
       pgnSearchTarget = unescape(window.location.search.match(thisRegExp)[3]);
   } else {
       pgnSearchTarget = "";
   }

   SetImagePath("uscf/32"); // use "" path if images are in the same folder as this javascript file
   SetImageType("png");
   SetHighlightOption(true); // true or false
   SetGameSelectorOptions(" Event         Site          Rd  White            Black            Res  Date", true, 12, 12, 2, 15, 15, 3, 10); // (head, num, chEvent, chSite, chRound, chWhite, chBlack, chResult, chDate);   
   SetCommentsIntoMoveText(false);
   SetCommentsOnSeparateLines(true);
   SetAutoplayDelay(1000); // milliseconds
   SetAutostartAutoplay(false);
   SetAutoplayNextGame(false); // if set, move to the next game at the end of the current game during autoplay
   SetInitialGame(1); // number of game to be shown at load, from 1 (default); values (keep the quotes) of "first", "last", "random" are accepted; other string values assumed as PGN search string
   SetInitialHalfmove(1, true); // halfmove number to be shown at load, 0 for start position, -1 for random halfmove
   SetShortcutKeysEnabled(true);

   function customFunctionOnPgnTextLoad() {
     document.getElementById('numGm').innerHTML = numberOfGames;
     theObject = document.getElementById('searchPgnExpression');
     if (theObject) {
       theObject.value = pgnSearchTarget;
     }
     searchPgnGame(pgnSearchTarget);
   }
   function customFunctionOnPgnGameLoad() { 
     document.getElementById('currGm').innerHTML = currentGame+1;
     document.getElementById('numPly').innerHTML = PlyNumber; 
   }
   function customFunctionOnMove() { document.getElementById('currPly').innerHTML = CurrentPly; }

</script>

</head>

<body>

<!-- paste your PGN below and make sure you dont specify an external source with SetPgnUrl() -->
<form style="display: none;"><textarea style="display: none;" id="pgnText">

</textarea></form>
<!-- paste your PGN above and make sure you dont specify an external source with SetPgnUrl() -->

<table class="containerTable">

<tr valign=bottom>
<td class="containerCell" colspan=2>
<div style="font-size: 200%; font-weight: bold; text-align: center;">
<script type="text/javascript">
document.write(pgnTitle);
</script>

</div>
</td>
</tr>

<tr valign=bottom>
<td class="containerCell" colspan=2>
<div id="GameSelector"></div>
<div id="GameSearch"></div>
</td>

</tr>

<tr valign=top>

<td class="containerCell" align="center" width=50%>
<div id="GameBoard"></div>
<p></p>
<div id="GameButtons"></div>
</td>

<td class="containerCell" width=50% style="text-align: left;">

<span class="label">Event:</span> <span id="GameEvent"></span> 
<br>
<span class="label">Site:</span> <span id="GameSite"></span> 
<p></p>
<span class="label">Round:</span> <span id="GameRound"></span> 
<br>
<span class="label">Date:</span> <span id="GameDate"></span> 
<p></p>
<span class="label">White:</span> <span id="GameWhite" style="font-weight: bold;"></span> 
<br>
<span class="label">Black:</span> <span id="GameBlack" style="font-weight: bold;"></span> 
<p></p>
<span class="label">Result:</span> <span id="GameResult" style="font-weight: bold;"></span> 
<p></p>
<span class="label">Side to move:</span> <span id="GameSideToMove"></span> 
<br>
<span class="label">Last move:</span> <span class="move"><span id="GameLastMove"></span></span> 
<br>
<span class="label">Next move:</span> <span class="move"><span id="GameNextMove"></span></span> 
<!--
<p></p>
<span class="label">Move comment:</span><br><span id="GameLastComment"></span>
-->

</td>

</tr>

<tr valign=top>
<td class="containerCell" style="text-align: justify;" colspan=2>
<span id="GameText"></span>
</td>
</tr>

<tr valign=top>
<td class="containerCell">
<div class="label" style="text-align: left; color: #d3d3d3;">
<script type="text/javascript">
document.write(pgnFilename);
</script>
</div>
</td>
<td class="containerCell">
<div class="label" style="text-align: right; color: #d3d3d3;">
ply:<span id=currPly>0</span>/<span id=numPly>0</span> 
game:<span id=currGm>0</span>/<span id=numGm>0</span> 
</div>
</td>
</tr>

</table>

</body>

</html>


