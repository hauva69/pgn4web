<!DOCTYPE>
<html>

<!--
  pgn4web javascript chessboard
  copyright (C) 2009, 2012 Paolo Casaschi
  see README file and http://pgn4web.casaschi.net
  for credits, license and more details
-->

<head>

<title>chess games</title>

<link href="analysis.css" type="text/css" rel="stylesheet" />

<link rel="shortcut icon" href="pawn.ico" />

<script src="pgn4web.js" type="text/javascript"></script>
<script src="chess-informant-NAG-symbols.js" type="text/javascript"></script>

<script src="fide-lookup.js" type="text/javascript"></script>

<script type="text/javascript">

  thisRegExp = /(&|\?)(help|h)(&|$)/i;
  if (window.location.search.match(thisRegExp) !== null) {
    alert("pgn4web collection.html parameters" + "\n" +
          " - pgnFile=filename.pgn" + "\n" +
          " - search=search expression" + "\n" +
          " - help");
  }

  pgnFilename = "";
  thisRegExp = /(&|\?)(pgnFile|pf)=([^&]*)(&|$)/i;
  if (window.location.search.match(thisRegExp) !== null) {
    pgnFilename = unescape(window.location.search.match(thisRegExp)[3]);
  } else {
    // accepts pgnData as alias for pgnFile for consistency with board.html
    thisRegExp = /(&|\?)(pgnData|pd)=([^&]*)(&|$)/i;
    if (window.location.search.match(thisRegExp) !== null) {
      pgnFilename = unescape(window.location.search.match(thisRegExp)[3]);
    }
  }
  if (pgnFilename !== "") {
    SetPgnUrl(pgnFilename); // if set, this has precedence over the inline PGN in the HTML file
  }

  thisRegExp = /(&|\?)(initialGame|ig)=([^&]*)(&|$)/i;
  if (window.location.search.match(thisRegExp) !== null) {
    SetInitialGame(unescape(window.location.search.match(thisRegExp)[3]));
  }

  thisRegExp = /(&|\?)(initialVariation|iv)=([^&]*)(&|$)/i;
  if (window.location.search.match(thisRegExp) !== null) {
    SetInitialVariation(unescape(window.location.search.match(thisRegExp)[3]));
  }

  thisRegExp = /(&|\?)(initialHalfmove|ih)=([^&]*)(&|$)/i;
  if (window.location.search.match(thisRegExp) !== null) {
    SetInitialHalfmove(unescape(window.location.search.match(thisRegExp)[3]), false);
  }

  SetImagePath("merida/39");
  SetImageType("png");
  SetHighlightOption(true);
  SetGameSelectorOptions(" ...", true, 12, 12, 2, 15, 15, 3, 10); // (head, num, chEvent, chSite, chRound, chWhite, chBlack, chResult, chDate);
  SetCommentsIntoMoveText(true);
  SetCommentsOnSeparateLines(false);
  SetAutoplayDelay(1000); // milliseconds
  SetAutostartAutoplay(false);
  SetAutoplayNextGame(false);
  SetShortcutKeysEnabled(true);

  function customShortcutKey_Shift_1() {
    if (typeof(openFidePlayerUrl) == "function") {
      openFidePlayerUrl(gameWhite[currentGame], customPgnHeaderTag('WhiteFideId'));
    }
  }

  function customShortcutKey_Shift_2() {
    if (typeof(openFidePlayerUrl) == "function") {
      openFidePlayerUrl(gameBlack[currentGame], customPgnHeaderTag('BlackFideId'));
    }
  }

  function customFunctionOnPgnTextLoad() {
    myOnResize();
  }

  function customFunctionOnPgnGameLoad() {
    customPgnHeaderTag('Result', 'ResultAtGametextEnd');
  }

  function myOnResize() {
    if (window.innerWidth && window.innerHeight) { ww = window.innerWidth; wh = window.innerHeight; }
    else if (document.documentElement && document.documentElement.clientWidth) { ww = document.documentElement.clientWidth; wh = document.documentElement.clientHeight; }
    else if (document.body && document.body.clientWidth) { ww = document.body.clientWidth; wh = document.body.clientHeight; }
    else { return; }

    if (theObject = document.getElementById("boardHeader")) { theObject.style.height = (wh - 60) + "px"; }
    if (theObject = document.getElementById("GameTextResult")) { theObject.style.height = (wh - 60) + "px"; }

    autoScrollToCurrentMoveIfEnabled();
  }

  enableAutoScrollToCurrentMove("GameTextResult");

</script>

</head>

<body onResize="myOnResize();">

<!-- paste your PGN below and make sure you dont specify an external source with SetPgnUrl() -->
<form style="display: none;"><textarea style="display: none;" id="pgnText">

</textarea></form>
<!-- paste your PGN above and make sure you dont specify an external source with SetPgnUrl() -->


<div class="boardheaderDiv" id="boardHeader">

<div id="GameBoard"></div>
<div class="tallRowSpace">&nbsp;</div>

<div class="headerLine"><a id="GameWhite" href="javascript:void(0);" onclick="searchPlayer(this.innerHTML, customPgnHeaderTag('WhiteFideId')); this.blur();" title="white player"></a>&nbsp;</div>
<div class="headerLine"><a id="GameBlack" href="javascript:void(0);" onclick="searchPlayer(this.innerHTML, customPgnHeaderTag('BlackFideId')); this.blur();" title="black player"></a>&nbsp;</div>
<div class="shortRowSpace">&nbsp;</div>
<div class="headerLine"><span id="GameResult" title="result"></span>&nbsp;</div>

</div>

<div class="gametextresultDiv" id="GameTextResult"><span id="GameText"></span>&nbsp;<span id="ResultAtGametextEnd"></span></div>

</body>

</html>
