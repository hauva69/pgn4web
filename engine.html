<html>

<!--
  pgn4web javascript chessboard
  copyright (C) 2009-2012 Paolo Casaschi
  see README file and http://pgn4web.casaschi.net
  for credits, license and more details
-->

<head>

<title>pgn4web analysis board</title>

<link rel="shortcut icon" href="pawn.ico" />

<style type="text/css">

body {
  margin: 0;
  font-family: sans-serif;
  overflow: hidden;
  color: #F4F4F4;
  background: #F4F4F4;
}

a {
  text-decoration: none;
}

.container {
  overflow: hidden;
  position: relative;
}

.gameCustomButtons {
  width: 100%;
}

.gameCustomButtonsHidden {
  visibility: hidden;
}

.gameAnalysisFlag {
  font-weight: bold;
}

.gameEval {
  position: absolute;
  right: 0;
  bottom: 0;
  z-index: 3;
}

.gameAnalysis {
  white-space: nowrap;
  text-align: left;
}

.gameAnalysisHidden {
  visibility: hidden;
}

.gameFlagAndMoves {
  position: absolute;
  bottom: 0;
  z-index: 2;
}

.gameFlagToMove {
  border-color: black;
}

.gameMoves {
  white-space: nowrap;
}

</style>

<script type="text/javascript">

var fenString;
thisRegExp = /(&|\?)(fenString|fs)=([^&]*)(&|$)/i;
if (window.location.search.match(thisRegExp) !== null) {
   fenString = unescape(window.location.search.match(thisRegExp)[3]);
}

var analysisSeconds = 13;
var minAnalysisSeconds = 3;
var maxAnalysisSeconds = 313;
   thisRegExp = /(&|\?)(analysisSeconds|as)=([1-9][0-9]*)(&|$)/i;
   if (window.location.search.match(thisRegExp) !== null) {
      analysisSeconds = parseInt(unescape(window.location.search.match(thisRegExp)[3]), 10);
      if (analysisSeconds < minAnalysisSeconds) { analysisSeconds = minAnalysisSeconds; }
      if (analysisSeconds > maxAnalysisSeconds) { analysisSeconds = maxAnalysisSeconds; }
   }

var disableEngine = "never";
thisRegExp = /(&|\?)(disableEngine|de)=([^&]*)(&|$)/i;
if (window.location.search.match(thisRegExp) !== null) {
   disableEngine = unescape(window.location.search.match(thisRegExp)[3]);
   if (disableEngine == "a") { disableEngine = "always"; }
   if (disableEngine == "n") { disableEngine = "never"; }
   if (disableEngine == "s") { disableEngine = "start"; }
   if ((disableEngine != "always") && (disableEngine != "never") && (disableEngine != "start")) {
      disableEngine = "never";
   }
}

var disableInputs;
thisRegExp = /(&|\?)(disableInputs|di)=([^&]*)(&|$)/i;
if (window.location.search.match(thisRegExp) !== null) {
   disableInputs = unescape(window.location.search.match(thisRegExp)[3]);
}
disableInputs = ((disableInputs == "true") || (disableInputs == "t"));


var lightColorHex = "#F4F4F4";
thisRegExp = /(&|\?)(lightColorHex|lch)=([0-9A-F]*)(&|$)/i;
if (window.location.search.match(thisRegExp) !== null) {
   lightColorHex = "#" + unescape(window.location.search.match(thisRegExp)[3]);
}
var darkColorHex = "#DDDDDD";
thisRegExp = /(&|\?)(darkColorHex|dch)=([0-9A-F]*)(&|$)/i;
if (window.location.search.match(thisRegExp) !== null) {
   darkColorHex = "#" + unescape(window.location.search.match(thisRegExp)[3]);
}
var highlightColorHex = "#BBBBBB";
thisRegExp = /(&|\?)(highlightColorHex|hch)=([0-9A-F]*)(&|$)/i;
if (window.location.search.match(thisRegExp) !== null) {
   highlightColorHex = "#" + unescape(window.location.search.match(thisRegExp)[3]);
}
var fontMovesColorHex = "#000000";
thisRegExp = /(&|\?)(fontMovesColorHex|fmch)=([0-9A-F]*)(&|$)/i;
if (window.location.search.match(thisRegExp) !== null) {
   fontMovesColorHex = "#" + unescape(window.location.search.match(thisRegExp)[3]);
}
var controlTextColorHex = "#BBBBBB";
thisRegExp = /(&|\?)(controlTextColorHex|ctch)=([0-9A-F]*)(&|$)/i;
if (window.location.search.match(thisRegExp) !== null) {
   controlTextColorHex = "#" + unescape(window.location.search.match(thisRegExp)[3]);
}
var backgroundColorHex = lightColorHex;
thisRegExp = /(&|\?)(backgroundColorHex|bch)=([0-9A-F]*)(&|$)/i;
if (window.location.search.match(thisRegExp) !== null) {
   backgroundColorHex = "#" + unescape(window.location.search.match(thisRegExp)[3]);
}

var squareSize = "30";
thisRegExp = /(&|\?)(squareSize|ss)=([1-9][0-9]*)(&|$)/i;
if (window.location.search.match(thisRegExp) !== null) {
   squareSize = unescape(window.location.search.match(thisRegExp)[3]);
}
if (squareSize < 20) { squareSize = 20; }

var framePadding = squareSize;
thisRegExp = /(&|\?)(framePadding|fp)=([0-9]+)(&|$)/i;
if (window.location.search.match(thisRegExp) !== null) {
   framePadding = unescape(window.location.search.match(thisRegExp)[3]);
}

var pieceSizeOptions = new Array(20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 52, 56, 60, 64, 72, 80, 88, 96, 112, 128, 144, 300);
function defaultPieceSize(squareSize) {
   targetPieceSize = Math.floor(0.8 * squareSize);
   for (ii=(pieceSizeOptions.length-1); ii>=0; ii--) {
      if (pieceSizeOptions[ii] <= targetPieceSize) { return pieceSizeOptions[ii]; }
   }
   return pieceSizeOptions[0];
}
var pieceSize = defaultPieceSize(squareSize);
thisRegExp = /(&|\?)(pieceSize|ps)=([1-9][0-9]*)(&|$)/i;
if (window.location.search.match(thisRegExp) !== null) {
   pieceSize = unescape(window.location.search.match(thisRegExp)[3]);
}
var pieceFont = "alpha";
thisRegExp = /(&|\?)(pieceFont|pf)=([^&]*)(&|$)/i;
if (window.location.search.match(thisRegExp) !== null) {
   pieceFont = unescape(window.location.search.match(thisRegExp)[3]);
   if (pieceFont == "a") { pieceFont = "alpha"; }
   if (pieceFont == "m") { pieceFont = "merida"; }
   if (pieceFont == "u") { pieceFont = "uscf"; }
   if ((pieceFont != "alpha") && (pieceFont != "merida") && (pieceFont != "uscf")) { pieceFont = "alpha"; }
}


var fontMovesSize = Math.ceil(squareSize * 11 / 30);
thisRegExp = /(&|\?)(fontMovesSize|fms)=([1-9][0-9]*)(&|$)/i;
if (window.location.search.match(thisRegExp) !== null) {
   fontMovesSize = unescape(window.location.search.match(thisRegExp)[3]);
}
var fontCommentsSize = Math.ceil(squareSize * 19 / 30);
thisRegExp = /(&|\?)(fontCommentsSize|fcs)=([1-9][0-9]*)(&|$)/i;
if (window.location.search.match(thisRegExp) !== null) {
   fontCommentsSize = unescape(window.location.search.match(thisRegExp)[3]);
}

thisRegExp = /(&|\?)(help|h)=(t|true)(&|$)/i;
if (window.location.search.match(thisRegExp) !== null) {
   document.write("<PRE>");
   document.write("URL parameters\n");
   document.write("\n");
   document.write(" - fenString = FEN position to analyze\n");
   document.write(" - analysisSeconds = analysis timeout in seconds (default 13)\n");
   document.write(" - disableEngine = always | never | start (default never)\n");
   document.write(" - disableInputs = true | false (default false)\n");
   document.write("\n");
   document.write(" - squareSize = size of square (default 30)\n");
   document.write(" - pieceSize = size of pieces | default (default selects piece size based on square size)\n");
   document.write(" - pieceFont = alpha | merida | uscf (default alpha)\n");
   document.write("\n");
   document.write(" - lightColorHex = light square color hex code, like FF0000 (default F4F4F4)\n");
   document.write(" - darkColorHex = dark square color hex code, like FF0000 (default DDDDDD)\n");
   document.write(" - highlightColorHex = highlight color hex code, like FF0000 (default BBBBBB)\n");
   document.write(" - backgroundColorHex = page background color hex code, like FF0000 (default as lightColorHex)\n");
   document.write(" - controlTextColorHex = control buttons text color hex code, like FF0000 (default BBBBBB)\n");
   document.write(" - fontMovesColorHex = moves color hex code, like FF0000 (default 000000)\n");
   document.write("\n");
   document.write(" - fontMovesSize = moves font size (default selects moves font size based on square size)\n");
   document.write(" - fontCommentsSize = analysis comments font size (default selects comments font size based on square size)\n");
   document.write("\n");
   document.write(" - framePadding = padding within the frame (default as squareSize)\n");
   document.write("\n");
   document.write("</PRE>");
}


function myRulesLength(sheet) {
   if (sheet.cssRules) { return sheet.cssRules.length; }
   if (sheet.rules) { return sheet.rules.length; }
   return null;
}

function myInsertRule(sheet, selector, declaration) {
   if (sheet.insertRule) { sheet.insertRule(selector + "{ " + declaration + " }", myRulesLength(sheet)); }
   else if (sheet.addRule) { sheet.addRule(selector, declaration); }
}

var mySheet = document.styleSheets[0];
myInsertRule(mySheet, "body", "color: " + fontMovesColorHex + "; background: " + backgroundColorHex + "; padding: " + framePadding + "px;");
myInsertRule(mySheet, "a", "color: " + fontMovesColorHex + ";");
myInsertRule(mySheet, ".boardTable", "width: " + (squareSize * 8) + "px; height: " + (squareSize * 8) + "px; background: " + lightColorHex + ";");
myInsertRule(mySheet, ".pieceImage", "width: " + pieceSize + "px; height: " + pieceSize + "px;");
myInsertRule(mySheet, ".whiteSquare", "width: " + squareSize + "px; height: " + squareSize + "px; background: " + lightColorHex + ";");
myInsertRule(mySheet, ".highlightWhiteSquare", "width: " + squareSize + "px; height: " + squareSize + "px; background: " + highlightColorHex + ";");
myInsertRule(mySheet, ".blackSquare", "width: " + squareSize + "px; height: " + squareSize + "px; background: " + darkColorHex + ";");
myInsertRule(mySheet, ".highlightBlackSquare", "width: " + squareSize + "px; height: " + squareSize + "px; background: " + highlightColorHex + ";");
myInsertRule(mySheet, ".container", "width: " + (squareSize * 8) + "px;");
myInsertRule(mySheet, ".gameCustomButtons", "height: " + squareSize + "px; padding-bottom: " + Math.floor(squareSize / 6) + "px; color: " + controlTextColorHex + "; font-size: " + fontMovesSize + "px;");
myInsertRule(mySheet, ".gameAnalysis", "height: " + squareSize + "px;");
myInsertRule(mySheet, ".gameFlagToMove", "height: " + Math.floor(fontMovesSize / 2) + "px; width: " + Math.floor(fontMovesSize / 2) + "px; margin-right: " + squareSize + "px;");
myInsertRule(mySheet, ".gameMoves", "font-size: " + fontMovesSize + "px;");
myInsertRule(mySheet, ".gameEval", "padding-left: " + squareSize + "px; padding-bottom: " + Math.floor(fontCommentsSize / 6) + "px; background: " + backgroundColorHex + "; font-size: " + fontCommentsSize + "px;");

</script>

<script src="pgn4web.js" type="text/javascript"></script>
<script src="chess-informant-NAG-symbols.js" type="text/javascript"></script>

<script type="text/javascript">

SetImagePath(pieceFont + "/" + pieceSize);
SetImageType("png");
SetHighlightOption(false);
SetShortcutKeysEnabled(false);

</script>

</head>

<body>

<!-- paste your PGN below and make sure you dont specify an external source with SetPgnUrl() -->
<form style="display: none;"><textarea style="display: none;" id="pgnText">

</textarea></form>
<!-- paste your PGN above and make sure you dont specify an external source with SetPgnUrl() -->

<center>
<div class="container">
<div id="GameBoard"></div>
<table id="GameCustomButtons" class="gameCustomButtons gameCustomButtonsHidden" cellspacing="0" cellpadding="0" border="0"><tr valign="bottom">
<td width="25%" align="center" onclick="GoToMove(StartPlyVar[0], 0);" title="go to start">&lt;&lt;</td>
<td width="20%" align="center" onclick="GoToMove(CurrentPly - 1);" title="move backward">&lt;</td>
<td width="10%" align="center" id="GameAnalysisFlag" class="gameAnalysisFlag" onclick="StopBackgroundEngine();">&nbsp;</td>
<td width="20%" align="center" onclick="GoToMove(CurrentPly + 1);" title="move forward">&gt;</td>
<td width="25%" align="center" onclick="GoToMove(StartPlyVar[0] + PlyNumberVar[0], 0);" title="go to end">&gt;&gt;</td>
</tr></table>
<div class="gameAnalysis gameAnalysisHidden" id="GameAnalysis">
<div class="gameEval" id="GameEval" onclick="displayHelp('informant_symbols');">&nbsp;</div>
<div class="gameFlagAndMoves">
<img class="gameFlagToMove" id="GameFlagToMove" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoEAYAAADcbmQuAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAMAAwADAGp0HVAAAAAlwSFlzAAAASAAAAEgARslrPgAAAAl2cEFnAAAAKAAAACgAo3CU+AAAACNJREFUaN7twQENAAAAwqD3T20PBxQAAAAAAAAAAAAAAAAPBjIoAAFxtd2pAAAAAElFTkSuQmCC" border="1" /><span class="gameMoves" id="GameMoves"></span>&nbsp;
</div>
</div>
</center>

<script type="text/javascript">

if (typeof(fenString) == "undefined") { fenString = FenStringStart; }
if (theObject = document.getElementById("pgnText")) {
   theObject.innerHTML = '[Setup "1"]\n[FEN "' + fenString + '"]\n';
}

if ((disableEngine == "always") && (theObject = document.getElementById("GameMoves"))) {
   theObject.innerHTML = "<span onclick='disableEngine = \"never\"; StartEngineAnalysis();'>engine analysis disabled</span>";
}


var engineWorker = "garbochess/garbochess.js";

var g_backgroundEngineValid = true;
var g_backgroundEngine;
var g_nodesPerSecond = 0;

function InitializeBackgroundEngine() {
   if (!g_backgroundEngineValid) { return false; }

   if (!g_backgroundEngine) {
      g_backgroundEngineValid = true;
      try {
          g_backgroundEngine = new Worker(engineWorker);
          g_backgroundEngine.onmessage = function (e) {
             if ((e.data.match("^pv") == "pv") && (fenString == CurrentFEN())) {
                if (matches = e.data.substr(3, e.data.length - 3).match(/Ply:(\d+) Score:(-*\d+) Nodes:(\d+) NPS:(\d+) (.*)/)) {
                   ply = parseInt(matches[1], 10);
                   if (isNaN(ev = parseInt(matches[2], 10))) {
                      ev = "";
                   } else {
                      maxEv = 99.9;
                      ev = Math.round(ev / 100) / 10;
                      if (ev < -maxEv) { ev = -maxEv; } else if (ev > maxEv) { ev = maxEv; }
                      if (fenString.indexOf(" b ") !== -1) { ev = -ev; }
                   }
                   if (theObject = document.getElementById("GameEval")) {
                      theObject.innerHTML = ev2NAG(ev);
                      theObject.title = (ev > 0 ? " +" : " ") + ev + (ev == Math.floor(ev) ? ".0 " : " ");
                   }
                   nodes = parseInt(matches[3], 10);
                   g_nodesPerSecond = parseInt(matches[4], 10);
                   pv = matches[5].replace(/(^\s+|\s*\+|\s+$)/g, "").replace(/\s*stalemate/, "=").replace(/\s*checkmate/, "#");
                   if (theObject = document.getElementById("GameMoves")) {
                      theObject.innerHTML = pv;
                      theObject.title = pv;
                      if (!disableInputs) {
                         theObject.setAttribute("onClick", "addPly(this.innerHTML.replace(/^\\s*(\\S+).*$/, '$1'));");
                      }
                   }
                   if (theObject = document.getElementById("GameAnalysisFlag")) {
                      theObject.innerHTML = "&middot;";
                      theObject.title = "analysis engine running";
                   }
                }
             }
          };
      } catch(e) {
         g_backgroundEngineValid = false;
         if (theObject = document.getElementById("GameMoves")) {
            theObject.innerHTML = "engine analysis unavailable";
            theObject.title = "chess engine for computer analysis not supported by the web browser";
         }
      }
   }
   return g_backgroundEngineValid;
}

function ev2NAG(ev) {
   if ((ev === null) || (ev === "") || (isNaN(ev = parseFloat(ev)))) { return ""; }
   if (ev < -3.95) { return NAG[19]; } // -+
   if (ev >  3.95) { return NAG[18]; } // +-
   if (ev < -1.35) { return NAG[17]; } // -/+
   if (ev >  1.35) { return NAG[16]; } // +/-
   if (ev < -0.35) { return NAG[15]; } // =/+
   if (ev >  0.35) { return NAG[14]; } // +/=
   return NAG[11];                     // =
}

function StopBackgroundEngine() {
   if (analysisTimeout) { clearTimeout(analysisTimeout); }
   if (g_backgroundEngine) {
      g_backgroundEngine.terminate();
      g_backgroundEngine = null;
      if (theObject = document.getElementById("GameAnalysisFlag")) {
         theObject.innerHTML = "&nbsp;";
         theObject.title = "";
      }
   }
}

var analysisTimeout;
function setAnalysisTimeout(seconds) {
   if (analysisTimeout) { clearTimeout(analysisTimeout); }
   analysisTimeout = setTimeout("analysisTimeout = null; StopBackgroundEngine();", seconds * 1000);
}

function StartEngineAnalysis() {
   StopBackgroundEngine();
   if (InitializeBackgroundEngine()) {
      fenString = CurrentFEN();
      g_backgroundEngine.postMessage("position " + fenString);
      g_backgroundEngine.postMessage("analyze");
      setAnalysisTimeout(analysisSeconds);
   }
}


function customFunctionOnPgnTextLoad() {
   if (theObject = document.getElementById("GameAnalysis")) {
      theObject.className = "gameAnalysis";
   }
   if ((!disableInputs) && (theObject = document.getElementById("GameCustomButtons"))) {
      theObject.className = "gameCustomButtons";
   }

   // undocumented parameter for internal use after pgn4web has started

   thisRegExp = /(&|\?)(engineSignature|es)=([1-9][0-9]*)(&|$)/i;
   if (window.location.search.match(thisRegExp) !== null) {
      engineSignature = unescape(window.location.search.match(thisRegExp)[3]);
   }
}

function customFunctionOnMove() {
   if (theObject = document.getElementById("GameFlagToMove")) {
      theObject.style.backgroundColor = CurrentPly % 2 ? "black" : "white";
      // theObject.style.borderColor = CurrentPly % 2 ? "white" : "black";
      theObject.title = (CurrentPly % 2 ? "black" : "white") + " to move";
   }

   if (disableEngine != "never") {
      if (disableEngine == "start") { disableEngine = "never"; }
   } else {
      StartEngineAnalysis();
   }

   if (clickFromCol !== "") {
      highlightSquare("abcdefgh".indexOf(clickFromCol), "12345678".indexOf(clickFromRow), false);
   }
   clickFromCol = "";
   clickFromRow = "";
   clickFromPiece = "";
   lastPromotionMove = lastPromotionPlaceholder;
   lastPromotionPlaceholder = "";
}

function customDebugInfo() {
   return window.Worker ? "engine=" + engineWorker + " analysisSeconds=" + analysisSeconds + " nodesPerSecond=" + num2string(g_nodesPerSecond) : "engine=unavailable";
}

function num2string(num) {
   if (num >= Math.pow(10, 9)) { num = Math.floor(num / Math.pow(10, 9)) + "G"; }
   else if (num >= Math.pow(10, 6)) { num = Math.floor(num / Math.pow(10, 6)) + "M"; }
   else if (num >= Math.pow(10, 3)) { num = Math.floor(num / Math.pow(10, 3)) + "K"; }
   else { num = num + ""; }
   return num;
}


var overwrittenPly;
var overwrittenPlyNumber;
function addPly(thisPly) {
   if (!thisPly) { return; }
   if (thisPly !== Moves[CurrentPly]) {
      overwrittenPly = Moves[CurrentPly];
      Moves[CurrentPly] = MovesVar[0][CurrentPly] = thisPly;
      overwrittenPlyNumber = PlyNumber;
      PlyNumber = PlyNumberVar[0] = CurrentPly + 1 - StartPly;
   }
   MoveForward(1);
}

function customFunctionOnAlert(msg) {
   if (msg.indexOf("error: invalid ply") !== 0) { return; }
   stopAlertPrompt();
   if (!overwrittenPly) { return; }
   Moves[CurrentPly] = MovesVar[0][CurrentPly] = overwrittenPly;
   PlyNumber = PlyNumberVar[0] = overwrittenPlyNumber;
   overwrittenPly = "";
}

for (cc=0; cc<8; cc++) { for (rr=0; rr<8; rr++) {
   boardShortcut("ABCDEFGH".charAt(cc) + "12345678".charAt(rr), "", detectClick, false);
} }

var clickFromCol = "";
var clickFromRow = "";
var clickFromPiece = "";
var lastPromotionMove = "";
var lastPromotionPlaceholder = "";
function detectClick(t,e) {
   if (! (matches = t.id.match(/img_tcol([0-7])trow([0-7])/))) { return; }
   thisCol = IsRotated ? 7 - matches[1] : matches[1];
   thisColChar = "abcdefgh".charAt(thisCol);
   thisRow = IsRotated ? matches[2] : 7 - matches[2];
   thisRowChar = "12345678".charAt(thisRow);
   if ((lastPromotionMove !== "") && (lastPromotionMove.charAt(2) == thisColChar) && (lastPromotionMove.charAt(3) == thisRowChar)) {
      thisMove = lastPromotionMove.substr(0,4) + "RBNQ".charAt("QRBN".indexOf(lastPromotionMove.charAt(4)));
      Moves[CurrentPly - 1] = MovesVar[0][CurrentPly - 1] = thisMove;
      MoveBackward(1);
      MoveForward(1);
      lastPromotionMove = thisMove;
   } else if (clickFromCol !== "") {
      setTimeout('highlightSquare("abcdefgh".indexOf("' + clickFromCol + '"), "12345678".indexOf("' + clickFromRow + '"), false);', 77);
      clickToCol = thisColChar;
      clickToRow = thisRowChar;
      if ((clickFromCol !== clickToCol) || (clickFromRow !== clickToRow)) {
         var thisMove = clickFromPiece + clickFromCol + clickFromRow + clickToCol + clickToRow;
         if (thisMove == "Ke1g1") { thisMove = "O-O"; }
         if (thisMove == "Ke1c1") { thisMove = "O-O-O"; }
         if (thisMove == "Ke8g8") { thisMove = "O-O"; }
         if (thisMove == "Ke8c8") { thisMove = "O-O-O"; }
         if (("KQRBN".indexOf(thisMove.charAt(0)) == -1) && (thisMove.charAt(3) == (CurrentPly % 2 ? "1" : "8"))) {
            thisMove += "Q";
            lastPromotionPlaceholder = thisMove;
         }
         addPly(thisMove);
      }
      clickFromCol = clickFromRow = clickFromPiece = "";
   } else {
      cc = CurrentPly % 2;
      for (ii=0; ii<16; ii++) {
         if ((PieceCol[cc][ii] == thisCol) && (PieceRow[cc][ii] == thisRow)) {
            if (PieceType[cc][ii] != -1) {
               clickFromPiece = " KQRBNP".charAt(PieceType[cc][ii]);
               if (clickFromPiece == "P") { clickFromPiece = ""; }
               clickFromCol = thisColChar;
               clickFromRow = thisRowChar;
               setTimeout('highlightSquare(' + thisCol + ', ' + thisRow + ', true);', 77);
            }
         }
      }
      lastPromotionMove = "";
   }
}


var engineSignature;

function updateFEN(newFEN) {
   if (newFEN != CurrentFEN()) {
      if (theObject = document.getElementById("pgnText")) {
         theObject.innerHTML = '[Setup "1"]\n[FEN "' + newFEN + '"]\n';
      }
      firstStart = true;
      start_pgn4web();
   }
}

function sameEngineDisabled(engineDisabled) {
   return (((engineDisabled) && (disableEngine == "always")) || ((!engineDisabled) && (disableEngine != "always")));
}

</script>

</body>

</html>
