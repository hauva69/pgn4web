<html>

<!--
  pgn4web javascript chessboard
  copyright (C) 2009, 2010 Paolo Casaschi
  see README file and http://pgn4web.casaschi.net
  for credits, license and more details
-->

<head>

<script type="text/javascript">

var pgnLinks = new Array();

chrome.tabs.getSelected(null, function(thisTab){
  pgnLinks = chrome.extension.getBackgroundPage().pgnLinks[thisTab.id];
  printPage(pgnLinks);
});

function printPage(links) {
  document.write('<body style="background: #E4E4E4; margin: 0; padding: 10; font-family: sans-serif; font-size: 16px; line-height: 150%; color: black; white-space: nowrap;">');
  document.write('<b>Chess games viewer: ' + pgnLinks.length + ' PGN link' + (pgnLinks.length == 1 ? '' : 's') + ' on this page</b><br/>');
  for(i=0; i<pgnLinks.length; i++) {
    document.write('<br/><a title="view games" style="color: black; text-decoration: none;" href=. onclick=\'chrome.tabs.create({url: "chess-games-viewer.html?pgnData=' + pgnLinks[i] + '"});\'><img src="alpha-16.png"></a>&nbsp;&nbsp;');
    document.write('<a title="view games with live refresh" style="color: black; text-decoration: none;" href=. onclick=\'chrome.tabs.create({url: "chess-games-viewer.html?pgnData=' + pgnLinks[i] + '&rm=1"});\'><img src="refresh.png"></a>&nbsp;&nbsp;');
    document.write('<a title="download games" style="color: black; text-decoration: none;" target="_blank" href="' + pgnLinks[i] + '"><img src="download.png"></a>&nbsp;&nbsp;&nbsp;&nbsp;');
    document.write(pgnLinks[i]);
  }
  document.write('</body>');
}

</script>

</head>

</html>
