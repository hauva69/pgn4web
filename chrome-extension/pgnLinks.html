<html>

<!--
  pgn4web javascript chessboard
  copyright (C) 2009, 2010 Paolo Casaschi
  see README file and http://pgn4web.casaschi.net
  for credits, license and more details
-->

<head>

<script type="text/javascript">

var pgnLinks = new Array();
var pgnLabels = new Array();

chrome.tabs.getSelected(null, function(thisTab){
  pgnLinks = chrome.extension.getBackgroundPage().pgnLinks[thisTab.id];
  pgnLabels = chrome.extension.getBackgroundPage().pgnLabels[thisTab.id];

  document.write('<body style="margin: 0; padding: 10; font-family: sans-serif; line-height: 133%; color: black; white-space: nowrap;">');
  document.write('<b>Chess games viewer: ' + pgnLinks.length + ' PGN link' + (pgnLinks.length == 1 ? '' : 's') + ' on this page</b><br/>');

  for(i=0; i<pgnLinks.length; i++) {
    document.write('<br/><a style="color: black; text-decoration: none;" href=. onclick=\'chrome.tabs.create({url: "chess-games-viewer.html?pgnData=' + pgnLinks[i] + '"});\'>view games</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
    document.write('<a style="color: black; text-decoration: none;" href=. onclick=\'chrome.tabs.create({url: "chess-games-viewer.html?pgnData=' + pgnLinks[i] + '&rm=1"});\'>live refresh</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
    document.write(pgnLabels[i] + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
    document.write('<a style="color: black; text-decoration: none;" target="_blank" href="' + pgnLinks[i] + '">' + pgnLinks[i] + '</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
  }

  document.write('</body>');
});

</script>

</head>

</html>
