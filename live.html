<html>

<!--
  pgn4web javascript chessboard
  copyright (C) 2009, 2012 Paolo Casaschi
  see README file and http://pgn4web.casaschi.net
  for credits, license and more details
-->

<head>

<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">

<title>pgn4web chess live broadcast</title>

<script src="pgn4web-server-config.js" type="text/javascript"></script>
<script  type="text/javascript">
// this should have been defined in pgn4web-server-config.js
// setting default value here just in case
var pgn4web_live_pointer_url;
if (pgn4web_live_pointer_url === undefined) { pgn4web_live_pointer_url = "."; }
</script>

<style type="text/css">

body
{ color: #BBBBBB; background: white; font-family: sans-serif; font-size: small; padding: 20px; overflow-x: hidden; overflow-y: auto; }

a:link, a:visited, a:hover, a:active
{ color: #BBBBBB; text-decoration: none; }

a:hover, a:active
{ color: red; }

</style>

<link rel="shortcut icon" href="pawn.ico" />

</head>

<body>

<table border="0" cellpadding="0" cellspacing="0" width="100%" height="100%"><tbody><tr>
<td align="left" valign="middle">
<h1 style="color: red;"><a style="color: red;" href=.>pgn4web</a> <a style="color: red;" href="javascript:void(0);" onclick="toggleLiveMode(); this.blur();" title="toggle live view">chess live broadcast</a></h1>
</td>
<td align="right" valign="middle">
<a href=.><img src=pawns.png border=0></a>
</td>
</tr><tr>
<td colspan="2" height="100%" style="padding: 40px;">
<table cellpadding="0" cellspacing="0" width="100%" height="100%" style="background-color: #EDE8D5; box-shadow: 0px 0px 20px #663300; border-color: #EDE8D5; border-style: solid; border-width: 40px; border-radius: 10px;" onclick="toggleLiveMode();"><tbody><tr valign="middle"><td align="center">
<iframe id="liveframe" src="about:blank" height="360" width="480" frameborder="0" scrolling="no" marginheight="0" marginwidth="0">your browser does not support the required iframe functionality</iframe>
</td></tr></tbody></table>
</td>
</tr></tbody></table>

<script type="text/javascript">

var iniGame='\\[\\s*Result\\s*"\\*"\\s*\\]';

var liveMode = "compact";
thisRegExp = /(&|\?)(mode|m)=([^&]*)(&|$)/i;
if (window.location.search.match(thisRegExp) !== null) {
  liveMode = unescape(window.location.search.match(thisRegExp)[3]);
}
if (liveMode == "d") { liveMode = "dynamic"; }
if ((liveMode != "compact") && (liveMode != "dynamic")) {
  liveMode = "compact";
}

setLiveMode(liveMode);

function setLiveMode(lm) {

  liveMode = lm;
  if (liveMode == "dynamic") {
    if (theObject = document.getElementById("liveframe")) {
      theObject.src = pgn4web_live_pointer_url + '/dynamic-frame.html?l=t&ct=pink&hch=t&scf=t&pf=m&ig=' + iniGame;
      theObject.height = "100%";
      theObject.width = "100%";
    }
  } else {
    if (theObject = document.getElementById("liveframe")) {
      theObject.src = pgn4web_live_pointer_url + '/live-compact.html?ig=' + iniGame;
      theObject.height = "360";
      theObject.width = "480";
    }
  }

}

function toggleLiveMode() {
  setLiveMode(liveMode == 'compact' ? 'dynamic' : 'compact');
}

</script>

</body>

</html>
