<html>

<!--
  pgn4web javascript chessboard
  copyright (C) 2009, 2011 Paolo Casaschi
  see README file and http://pgn4web.casaschi.net
  for credits, license and more details
-->

<head>

<title>pgn4web help</title>

<style type="text/css">

html {
}

body {
  font-family: sans-serif;
  color: black;
  background: white;
  padding: 20px;
  overflow-y: scroll;
}

a {
  text-decoration: none;
  color: black;
}

.heading, .headingSelected {
  color: #CCCCCC;
  margin: 20px;
  line-height: 1.5em;
  font-weight: bold;
  font-size: 125%;
}

.headingSelected {
  color: black;
}

.section {
  display: none;
}

</style>

<link rel="shortcut icon" href="pawn.ico" />

</head>

<body>

<script type="text/javascript">

sections = ["user_interface", "shortcut_squares", "shortcut_keys", "search_tool", "credits_and_license"];

function showSection(section) {
  section2show = sections[0];
  for (s in sections) {
    if (theObject = document.getElementById(sections[s] + "_section")) { theObject.style.display = ""; }
    if (theObject = document.getElementById(sections[s] + "_heading")) { theObject.className = "heading"; }
    if (sections[s] === section) { section2show = section; }
  }
  if (theObject = document.getElementById(section2show + "_section")) { theObject.style.display = "inline"; }
  if (theObject = document.getElementById(section2show + "_heading")) { theObject.className = "headingSelected"; }
  document.title = "pgn4web help: " + section2show.replace(/_/g, " ");
}

function print_help_row (one, two) {
  document.write("<tr><td style='text-align: left; vertical-align: top; padding-left:40; white-space:nowrap;'>" + one + "</td><td style='text-align: left; vertical-align: top; padding-left:20'>" + two + "</td></tr>");
}

try {
  displayVersion = 'v' + opener.pgn4web_version;
} catch(e) {
  displayVersion = '';
}

try {
  isRotated = opener.IsRotated;
} catch(e) {
  isRotated = false;
}

if (isRotated) {
  colorAtTheBottom = "Black";
  shortcutSquareKeyEnable = "A2";
  shortcutSquareSearchPopup = "G4";
  shortcutSquareSearchRepeat = "F4";
  shortcutSquareSearchRepeatBackward = "H4";
  rowNumbers = "87654321";
  colLetters = "HGFEDCBA";
} else {
  colorAtTheBottom = "White";
  shortcutSquareKeyEnable = "H7";
  shortcutSquareSearchPopup = "B5";
  shortcutSquareSearchRepeat = "C5";
  shortcutSquareSearchRepeatBackward = "A5";
  rowNumbers = "12345678";
  colLetters = "ABCDEFGH";
}

</script>

<table name="top" width=100% cellspacing=0 cellpadding=0><tr>
<td align=left valign=middle>
<h1> pgn4web help</h1>
</td><td align=right valign=middle>
<img src=pawns.png border=0>
</td></tr></table>

<div style="text-align:center; margin-top:50px; margin-bottom:50px;">

<script type="text/javascript">

for (s in sections) {
  document.write("<a id='" + sections[s] + "_heading' class='heading' href='javascript:void(0);' onclick='showSection(\"" + sections[s] + "\")'>" + sections[s].replace(/_/g, "&nbsp;") + "</a> ");
}

</script>

</div>

<div id="user_interface_section" class="section">

The user can interact with the pgn4web chessboard <a href="javascript:void(0);" onclick="showSection('shortcut_keys');">using the keyboard</a> or <a href="javascript:void(0);" onclick="showSection('shortcut_squares');">clicking chessboard squares</a>; hovering the mouse on each square displays an help summary.
<p></p>
A <a href="javascript:void(0);" onclick="showSection('search_tool')">search tool</a> allows searching within the PGN games.
<p></p>
Errors alert messages are logged, such as failures to load PGN games, incorrect PGN games or incorrect FEN strings. When an error is encountered, the top left chessboard square will flash to signal the exception. The error alert log can be reviewed clicking on the same top left chessboard square. 

</div>


<div id="shortcut_squares_section" class="section">

The user can interact with the pgn4web chessboard clicking chessboard squares:
<p></p>

<script type="text/javascript">
try {
  openerBoardTitle = opener.boardTitle;
  document.write("<table style='padding:0;' border=0>");
  for (r=7; r>=0; r--) {
    rowDisplayed = false;
    for (c=0; c<=7; c++) {
      if (openerBoardTitle[c][r] !== "") {
        print_help_row(colLetters.charAt(c) + rowNumbers.charAt(7-r), opener.boardTitle[c][r]);
        rowDisplayed = true;
      }
    }
    if (rowDisplayed) { print_help_row("&nbsp;", ""); }
  }
  document.write("</table>");	
  document.write("Squares labeled assuming " + colorAtTheBottom + " on bottom.");
} catch(e) {
  document.write("shortcut squares info not available from the opener window, please hover the mouse pointer on each square of the chessboard to check for their shortcut action.");
}
</script>

</div>


<div id="shortcut_keys_section" class="section">

The user can interact with the pgn4web chessboard using the keyboard:
<p></p>

<script type="text/javascript">

document.write("<table style='padding:0;' border=0>");	
print_help_row("h , l", "game start, end (also arrow up, down keys)");
print_help_row("u, i", "find previous, next comment");
print_help_row("j , k", "move backward, forward (also arrow left, right keys)");
print_help_row("&nbsp;", "");
print_help_row("a", "start autoplay");
print_help_row("0", "stop autoplay");
print_help_row("1, 2...", "autoplay 1 sec, 2 sec...");
print_help_row("&nbsp;", "");
print_help_row("v, m", "load first, last game");
print_help_row("b, n", "load previous, next game");
print_help_row("c, x", "load random game, random game at random ply");
print_help_row("&nbsp;", "");
print_help_row("s", "search prompt");
print_help_row("enter", "repeat last search");
print_help_row("shift-enter", "repeat last search backward");
print_help_row("&nbsp;", "");
print_help_row("r, y", "pause, restart live broadcast automatic refresh");
print_help_row("t", "force games refresh during live broadcast");
print_help_row("shift-t", "toggle live broadcast stepping");
print_help_row("&nbsp;", "");
print_help_row("p", "toggle comments");
print_help_row("o", "toggle comments on separate lines");
print_help_row("&nbsp;", "");
print_help_row("g", "toggle highlighting");
print_help_row("f, d", "flip board, White on bottom");
print_help_row("&nbsp;", "");
print_help_row("z", "pgn4web debug info");
print_help_row("shift-z", "pgn4web website");
print_help_row("esc", "pgn4web help");
print_help_row("shift-esc", "toggle enabling shortcut keys");
print_help_row("&nbsp;", "");
document.write("</table>");

try {
  var keysEnabled = opener.shortcutKeysEnabled;
  document.write('Shortcut keys currently ' + (keysEnabled ? "enabled, disable" : "disabled, enable") + ' in the chessboard with shift+escape or clicking square ' + shortcutSquareKeyEnable + ' (assuming ' + colorAtTheBottom + ' on bottom).\n'); 
} catch (e) {
  document.write('Shortcut keys info not available from the opener window, please check about shortcut keys in the chessboard with shift+escape or clicking square ' + shortcutSquareKeyEnable + ' (assuming ' + colorAtTheBottom + ' on bottom).\n');
}

</script>

</div>


<div id="search_tool_section" class="section">

<script type="text/javascript">
document.write('Access the search tool either directly with the search form (if available on the web page) or via the popup search box invoked with the ' + shortcutSquareSearchPopup + ' shortcut square (assuming ' + colorAtTheBottom + ' on bottom) and/or the \'s\' shortcut key. The ' + shortcutSquareSearchRepeat + ' shortcut square (assuming ' + colorAtTheBottom + ' on bottom) and/or the \'enter\' shortcut key repeat the last search. The ' + shortcutSquareSearchRepeatBackward + ' shortcut square (assuming ' + colorAtTheBottom + ' on bottom) and/or the \'shift-enter\' shortcut key repeat the last search backward.'); 
</script>

<p></p>
For full details about the search tool (implemented as regular expression match of the text of the PGN game), please refer to <a href="http://code.google.com/p/pgn4web/wiki/SearchTool" target="_blank">the pgn4web search tool wiki page</a>; please find below a sample list of useful search patterns:
<p></p>
<script type="text/javascript">
document.write("<table style='padding:0;' border=0>");	
print_help_row("something", "search for text <i>something</i> anywhere in the PGN game");
print_help_row("White\\s*\"Somebody", "search for player <i>Somebody</i> as White");
print_help_row("\(White|Black\)\\s*\"Somebody", "search for player <i>Somebody</i> as either White or Black");
print_help_row("White\\s*\"Somebody.*Black\\s*\"Other", "search for <i>Somebody</i> vs <i>Other</i> games");
print_help_row("Site\\s*\"Somewhere.*Result\\s*\"\(1-0|0-1\)", "search for games at the <i>Somewhere</i> site ending with a win");
print_help_row("Result\\s*\"\(?!1-0\)", "search for games not ending with a White win");
print_help_row("[^0-9]1.\\s*e4\\s*e6", "search for games with moves <i>1. e4 e6</i>");
print_help_row("[^0-9]1.\\s*e4\\s*e5\(?!\\s*2.\\s*Nf3\)", "search for games with moves <i>1. e4 e5</i> without <i>2. Nf3</i>");
document.write("</table>");

</script>

</div>


<div id="credits_and_license_section" class="section">

Javascript modifications of <a href=mailto:pgn4web@casaschi.net target=_blank>Paolo Casaschi (pgn4web@casaschi.net)</a> on code from the http://ficsgames.com database, in turn likely based on code from the <i>LT PGN viewer</i> at http://www.lutanho.net/pgn/pgnviewer.html
<p></p>
PNG images from http://ixian.com/chess/jin-piece-sets by Eric De Mund; licensed under <a href=http://creativecommons.org/licenses/by-sa/3.0/>creative commons attribution-share alike 3.0 unported license</a>.
<br>
SVG images from http://commons.wikimedia.org/wiki/Category:SVG_chess_pieces by Colin M.L. Burnett; licensed under <a href=http://www.gnu.org/copyleft/fdl.html>GFDL</a>, <a href=http://www.creativecommons.org/licenses/by-sa/3.0/>CC-BY-SA-3.0</a> or <a href=http://www.gnu.org/licenses/gpl.html>GPL</a>, via Wikimedia Commons.
<p></p>
The figurine fonts are derived from the <i>Liberation Sans</i> font (released under GNU General Public License, see https://fedorahosted.org/liberation-fonts/) with the addition of chess pieces from freeware fonts: the <i>alpha2</i> font (Peter Strickland), the <i>good companion</i> font (David L. Brown), the <i>merida</i> font (Armando H. Marroquin), the <i>pirate</i> font (Klaus Wolf) and the <i>chess usual</i> font (Armando H. Marroquin). The original chess fonts and more details are available at http://www.enpassant.dk/chess/fonteng.htm
<p></p>
Some functionality of specific applications of pgn4web or specific demo pages depends on third party javascript libraries, each stored in a separate subfolder with the associated credits and license information.
<p></p>
Remaining pgn4web code is copyright (C) 2009, 2011 <a href=mailto:pgn4web@casaschi.net target=_blank>Paolo Casaschi (pgn4web@casaschi.net)</a> and licensed under the terms of the <a href=license-gpl-2.0.txt>GNU General Public License version 2</a> as published by the <a href=http://www.fsf.org target=_blank>Free Software Foundation</a>; either <a href=license-gpl-2.0.txt>version 2 of the License</a>, or (at your option) any later version.

</div>


<table style="margin-top:40px;" width=100% cellspacing=0 cellpadding=0><tr>
<td align=left valign=bottom>
<script type="text/javascript">document.write("<b>pgn4web " + displayVersion + "</b>");</script>
</td><td align=right valign=bottom>
<img src=pawns.png border=0>
</td></tr></table>


<script type="text/javascript">

showSection(location.search.substr(1));

</script>

</body>

</html>
