<?xml version="1.0" encoding="UTF-8" ?>

<Module>

  <ModulePrefs
    title="Chess Puzzler"
    directory_title="Chess Puzzler"
    title_url="http://pgn4web.casaschi.net/"
    description="chess puzzler of the day from the pgn4web project at http://pgn4web.casaschi.net"
    author="Paolo Casaschi"
    author_email="pgn4web@casaschi.net"
    screenshot="http://pgn4web.googlecode.com/svn/wiki/screenshots/screenshot-igooglegadget.png"
    thumbnail="http://pgn4web.googlecode.com/svn/wiki/screenshots/thumbnail-igooglegadget.png"
    height="270"
    width="240">
    <Require feature="dynamic-height"/>
  </ModulePrefs>

  <UserPref name="size" 
     display_name="size"
     datatype="enum"
     default_value="0">
    <EnumValue value="0" display_value="auto resize"/>
    <EnumValue value="20" display_value="tiny"/>
    <EnumValue value="24" display_value="small"/>
    <EnumValue value="30" display_value=" medium"/>
    <EnumValue value="40" display_value="large"/>
    <EnumValue value="60" display_value="big"/>
    <EnumValue value="80" display_value="huge"/>
    <EnumValue value="110" display_value="giant"/>
    <EnumValue value="150" display_value="colossal"/>
  </UserPref>
  <UserPref name="colorScheme" 
     display_name="color"
     datatype="enum"
     default_value="0">
    <EnumValue value="7" display_value="black"/>
    <EnumValue value="0" display_value="blue"/>
    <EnumValue value="1" display_value="braun"/>
    <EnumValue value="2" display_value="gray"/>
    <EnumValue value="3" display_value="green"/>
    <EnumValue value="4" display_value="pink"/>
    <EnumValue value="5" display_value="white"/>
    <EnumValue value="6" display_value="wood"/>
  </UserPref>

  <Content type="html">
    <![CDATA[

      <center>
      <iframe id='mainframe' frameborder='0' scrolling='no' marginheight='0' marginwidth='0'>
      iframe support required to display the chess puzzler
      </iframe>
      </center>

      <script type="text/javascript">

/*
 *  pgn4web javascript chessboard
 *  copyright (C) 2009, 2011 Paolo Casaschi
 *  see README file and http://pgn4web.casaschi.net
 *  for credits, license and more details
 */

        function getWidth() {
          if (self.innerHeight) { return self.innerWidth; }
          else if (document.documentElement && document.documentElement.clientHeight) {
            return document.documentElement.clientWidth;
          } else if (document.body) { return document.body.clientWidth; }
          return 0;
        }

        var prefs = new _IG_Prefs();
        var lightColorHex =             new Array("E8E8E8","F2D798","F4F4F4","EFF4EC","EDE8D5","FFFFFF","FFCC99","999999");
        var darkColorHex =              new Array("C2C9D1","C9AD6F","E0E0E0","C6CEC3","CFCBB3","E4E4E4","CC9966","888888");
        var controlBackgroundColorHex = new Array("E8E8E8","F2D798","F4F4F4","EFF4EC","EDE8D5","FFFFFF","FFCC99","888888");
        var controlTextColorHex =       new Array("585B5E","54110C","888888","888888","615F54","888888","705438","000000");
        var colorScheme = prefs.getInt("colorScheme");

        var squareSize = prefs.getInt("size");
        if (squareSize == 0) {
          squareSize = Math.floor(getWidth() / 8);
          if (squareSize == 0) { squareSize = 30; }
        }

        if (theObj = document.getElementById('mainframe')) {
          theObj.height = squareSize * 9;
          theObj.style.height = (squareSize * 9) + "px";
          theObj.width = squareSize * 8;
          theObj.style.width = (squareSize * 8) + "px";
          theObj.src = "http://go.casaschi.net/pgn4web-puzzler?" + 
            "pieceFont=hash" +
            "&squareSize=" + squareSize +
            "&lightColorHex=" + lightColorHex[colorScheme] +
            "&darkColorHex=" + darkColorHex[colorScheme] +
            "&controlBackgroundColorHex=" + controlBackgroundColorHex[colorScheme] +
            "&controlTextColorHex=" + controlTextColorHex[colorScheme] +
            "&frameBorderColorHex=none";
        }

        gadgets.window.adjustHeight();

      </script>
    ]]>
  </Content>

</Module>
