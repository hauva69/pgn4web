<!--
  pgn4web javascript chessboard
  copyright (C) 2009, 2010 Paolo Casaschi
  see README file and http://pgn4web.casaschi.net
  for credits, license and more details
-->

<script type="text/javascript">

function pgnLinkOnClick(info, tab) {
  var url = "collection-chrome-extension.html?pgnData=" + info.linkUrl + "&title=games from " + info.linkUrl;
  chrome.tabs.create({url: url});
}

function pgnLinkLiveRefreshOnClick(info, tab) {
  var url = "collection-chrome-extension.html?pgnData=" + info.linkUrl + "&title=live games from " + info.linkUrl + "&refreshMinutes=1";
  chrome.tabs.create({url: url});
}

function pgnPageOnClick(info, tab) {
  var remoteUrl = prompt("Enter PGN games URL for vieweing:");
  if (!remoteUrl) { return; }
  if (!remoteUrl.match(/\.pgn$/i)) {
    alert("You entered:\n" + remoteUrl + "\n\nError: only PGN games URL allowed.");
    return;
  }
  var url = "collection-chrome-extension.html?pgnData=" + remoteUrl + "&title=games from " + remoteUrl;
  chrome.tabs.create({url: url});
}

chrome.contextMenus.create({"title": "View chess games by pgn4web", "contexts": ["link"], targetUrlPatterns:["*://*/*.pgn", "*://*/*.PGN"], "onclick": pgnLinkOnClick});
chrome.contextMenus.create({"title": "View chess games with live refresh", "contexts": ["link"], targetUrlPatterns:["*://*/*.pgn", "*://*/*.PGN"], "onclick": pgnLinkLiveRefreshOnClick});

chrome.contextMenus.create({"title": "Enter PGN games URL for viewing", "contexts": ["page"], "onclick": pgnPageOnClick});

</script>

