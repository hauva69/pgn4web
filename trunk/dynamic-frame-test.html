<html>

<!--
  pgn4web javascript chessboard
  copyright (C) 2009, 2012 Paolo Casaschi
  see README file and http://pgn4web.casaschi.net
  for credits, license and more details
-->

<head>

<title>dynamic frame test</title>

<link rel="shortcut icon" href="pawn.ico" />

</head>

<body style="margin:0; padding:0; font-family:sans-serif;" onload="atLoad();">

<center>

<div id="header" style="padding:1em;">
<span style="white-space:nowrap;">&nbsp; width <input id="width" size="5" onchange="change_w(this.value);"> &nbsp;</span>
<span style="white-space:nowrap;">&nbsp; height <input id="height" size="5" onchange="change_h(this.value);"> &nbsp;</span>
<span style="white-space:nowrap;">&nbsp; <input type="button" value="refresh" onclick="frameRefresh();"/> &nbsp;</span>
<span style="white-space:nowrap;">&nbsp; <input type="button" value="16:9" onclick="preselect(16,9);"/> &nbsp;</span>
<span style="white-space:nowrap;">&nbsp; <input type="button" value="9:16" onclick="preselect(9,16);"/> &nbsp;</span>
<span style="white-space:nowrap;">&nbsp; <input type="button" value="4:3" onclick="preselect(4,3);"/> &nbsp;</span>
<span style="white-space:nowrap;">&nbsp; <input type="button" value="3:4" onclick="preselect(3,4);"/> &nbsp;</span>
<span style="white-space:nowrap;">&nbsp; <input type="button" value="-w-" onclick="modify(-10, 0);"/> &nbsp;</span>
<span style="white-space:nowrap;">&nbsp; <input type="button" value="+W+" onclick="modify(+10, 0);"/> &nbsp;</span>
<span style="white-space:nowrap;">&nbsp; <input type="button" value="-h-" onclick="modify(0, -10);"/> &nbsp;</span>
<span style="white-space:nowrap;">&nbsp; <input type="button" value="+H+" onclick="modify(0 ,+10);"/> &nbsp;</span>
<span style="white-space:nowrap;">&nbsp; <input type="button" value="random" onclick="modify(null, null);"/>&nbsp;</span>
<span style="white-space:nowrap;">&nbsp; <input type="button" value="fullscreen" onclick="location.href=document.getElementById('frame').src"/>&nbsp;</span>
</div>

<iframe id="frame" src="dynamic-frame.html?pd=demoLiveGames.pgn" height="" width="" frameborder="no" scrolling='no' marginheight='0' marginwidth='0'></iframe>

</center>

<script type="text/javascript">

function atLoad() {
  preselect(16, 9);
  frameRefresh();
}

function frameRefresh() {
  document.getElementById("frame").src = "dynamic-frame.html" + location.search;
}

function preselect(w, h) {
  if (window.innerWidth && window.innerHeight) { ww = window.innerWidth; wh = window.innerHeight; }
  else if (document.documentElement && document.documentElement.clientWidth) { ww = document.documentElement.clientWidth; wh = document.documentElement.clientHeight; }
  else if (document.body && document.body.clientWidth) { ww = document.body.clientWidth; wh = document.body.clientHeight; }
  else { throw("failed to get window size"); }
  aw = ww;
  ah = wh - document.getElementById("header").offsetHeight;
  fw = Math.floor(0.9 * Math.min(aw, ah * w / h));
  fh = Math.floor(fw * h / w);
  document.getElementById("width").value = fw; 
  change_w(fw); 
  document.getElementById("height").value = fh;
  change_h(fh); 
}

function change_w(w) {
  if (isNaN(w)) { w = document.getElementById("width").value = 256; }
  document.getElementById("frame").width = w;
}

function change_h(h) {
  if (isNaN(h)) { h = document.getElementById("height").value = 256; }
  document.getElementById("frame").height = h;
}

function modify(dw, dh) {
  if (dw === null) { dw = Math.floor(-15 + 30 * Math.random()); }
  if (dh === null) { dh = Math.floor(-15 + 30 * Math.random()); }
  if (dw != 0) {
    document.getElementById("width").value = Math.floor(document.getElementById("width").value * (100 + dw) / 100);
    change_w(document.getElementById("width").value);
  }
  if (dh != 0) {
    document.getElementById("height").value = Math.floor(document.getElementById("height").value * (100 + dh) / 100);
    change_h(document.getElementById("height").value);
  }
}

</script>

</body>

</html>

