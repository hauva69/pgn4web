<html>

<head>

<title>pgn4web chessboard generator</title>

<style type="text/css">

html,
body {
  font-family: sans-serif;
  color: black;
  background: white;
  padding: 10;
}

a {
  text-decoration: none;
  color: black;
}

.helptext {
  color: gray;
}

</style>

</head>

<body>

<script src="pgn4web.js" type="text/javascript"></script>
<script type="text/javascript" src="jscolor/jscolor.js"></script>

<script  type="text/javascript">

// CUSTOMIZATION INSTRUCTIONS
// if you customize the board-generator.html file for your site 
// you probably want to customize the default values

pgnText_default = '[White " "]\n[Black " "]\n[Result " "]\n[Date " "]\n[Event " "]\n[Site " "]\n[Round " "]\n\n';
tryPgnUrl_default = "t";
auto_default = "t";
delay_default = 1000;
loop_default = "f";
pieceFont_default = "alpha";
pieceSize_default = 30;
squareSize_default = 40;
lightColorHex_default = "EFF4EC";
darkColorHex_default = "C6CEC3";
boardBorderColorHex_default = "000000";
highlightColorHex_default = "DAF4D7";
showButtons_default = "f";
textMargin_default = 0;
showHeader_default = "t";
showMoves_default = "t";
frameHeight_default = "";
frameWidth_default = "";
framePadding_default = 0;
showComments_default = "t"; 
showCommentsOnSeparateLines_default = "f"; 
fontHeaderColorHex_default = "000000";
fontMovesColorHex_default = "000000";
fontCommentsColorHex_default = "808080";
highlightMoveColorHex_default = "DAF4D7";
fontHeaderSize_default = "100%";
fontMovesSize_default = "100%";
fontCommentsSize_default = "100%";
backgroundColorHex_default = "FFFFFF";
previewBackgroundColorHex_default = "DDDDDD";
baseUrl_default = location.protocol + "//" + location.hostname+location.pathname.substr(0, location.pathname.lastIndexOf("/")) + "/board.html";


// max length of the iframeUrl, if this is exceeded the PGN text will be placed in a separate tag rather than in the URL even in tryPgnUrl is set 
iframeUrl_max = 2000;

// max length of the PGN textarea before triggering a warning
pgn_textarea_max = 32767 - 500;

function set_defaults() {
  document.getElementById('html_code').innerHTML = '';
  document.getElementById('html_code_status').innerHTML = '&nbsp;';

  if ((pgnText_value = unescape(gup("pgnText"))) == "") { pgnText_value = pgnText_default }
  document.getElementById('pgnText').value = pgnText_value;
  update_pgnTextLength();

  if ((tryPgnUrl_value = gup("tryPgnUrl")) == "") { tryPgnUrl_value = tryPgnUrl_default }
  document.board.tryPgnUrl.checked = (tryPgnUrl_value == "t");

  if ((auto_value = gup("auto")) == "") { auto_value = auto_default }
  document.board.auto.checked = (auto_value == "t");

  if ((delay_value = gup("delay")) == "") { delay_value = delay_default }
  document.board.delay.value = delay_value;

  if ((loop_value = gup("loop")) == "") { loop_value = loop_default }
  document.board.loop.checked = (loop_value == "t");

  if ((pieceFont_value = gup("pieceFont")) == "") { pieceFont_value = pieceFont_default }
  document.board.pieceFont.value = pieceFont_value;

  if ((pieceSize_value = gup("pieceSize")) == "") { pieceSize_value = pieceSize_default }
  document.getElementById('pieceSize').value = pieceSize_value;

  if ((squareSize_value = gup("squareSize")) == "") { squareSize_value = squareSize_default }
  document.getElementById('squareSize').value = squareSize_value;

  if ((lightColorHex_value = gup("lightColorHex")) == "") { lightColorHex_value = lightColorHex_default }
  document.board.lightColorHex.value = lightColorHex_value;

  if ((darkColorHex_value = gup("darkColorHex")) == "") { darkColorHex_value = darkColorHex_default }
  document.board.darkColorHex.value = darkColorHex_value;

  if ((boardBorderColorHex_value = gup("boardBorderColorHex")) == "") { boardBorderColorHex_value = boardBorderColorHex_default }
  document.board.boardBorderColorHex.value = boardBorderColorHex_value;

  if ((highlightColorHex_value = gup("highlightColorHex")) == "") { highlightColorHex_value = highlightColorHex_default }
  document.board.highlightColorHex.value = highlightColorHex_value;

  if ((showButtons_value = gup("showButtons")) == "") { showButtons_value = showButtons_default }
  document.board.showButtons.checked = (showButtons_value == "t");

  if ((textMargin_value = gup("textMargin")) == "") { textMargin_value = textMargin_default }
  document.getElementById('textMargin').value = textMargin_value;

  if ((showHeader_value = gup("showHeader")) == "") { showHeader_value = showHeader_default }
  document.board.showHeader.checked = (showHeader_value == "t");

  if ((showMoves_value = gup("showMoves")) == "") { showMoves_value = showMoves_default }
  document.board.showMoves.checked = (showMoves_value == "t");

  if ((showComments_value = gup("showComments")) == "") { showComments_value = showComments_default }
  document.board.showComments.checked = (showComments_value == "t");

  if ((showCommentsOnSeparateLines_value = gup("showCommentsOnSeparateLines")) == "") { showCommentsOnSeparateLines_value = showCommentsOnSeparateLines_default }
  document.board.showCommentsOnSeparateLines.checked = (showCommentsOnSeparateLines_value == "t");

  if ((fontHeaderColorHex_value = gup("fontHeaderColorHex")) == "") { fontHeaderColorHex_value = fontHeaderColorHex_default }
  document.board.fontHeaderColorHex.value = fontHeaderColorHex_value;

  if ((fontMovesColorHex_value = gup("fontMovesColorHex")) == "") { fontMovesColorHex_value = fontMovesColorHex_default }
  document.board.fontMovesColorHex.value = fontMovesColorHex_value;

  if ((fontCommentsColorHex_value = gup("fontCommentsColorHex")) == "") { fontCommentsColorHex_value = fontCommentsColorHex_default }
  document.board.fontCommentsColorHex.value = fontCommentsColorHex_value;

  if ((highlightMoveColorHex_value = gup("highlightMoveColorHex")) == "") { highlightMoveColorHex_value = highlightMoveColorHex_default }
  document.board.highlightMoveColorHex.value = highlightMoveColorHex_value;

  if ((fontHeaderSize_value = gup("fontHeaderSize")) == "") { fontHeaderSize_value = fontHeaderSize_default }
  document.board.fontHeaderSize.value = fontHeaderSize_value;

  if ((fontMovesSize_value = gup("fontMovesSize")) == "") { fontMovesSize_value = fontMovesSize_default }
  document.board.fontMovesSize.value = fontMovesSize_value;

  if ((fontCommentsSize_value = gup("fontCommentsSize")) == "") { fontCommentsSize_value = fontCommentsSize_default }
  document.board.fontCommentsSize.value = fontCommentsSize_value;

  if ((backgroundColorHex_value = gup("backgroundColorHex")) == "") { backgroundColorHex_value = backgroundColorHex_default }
  document.board.backgroundColorHex.value = backgroundColorHex_value;

  if ((previewBackgroundColorHex_value = gup("previewBackgroundColorHex")) == "") { previewBackgroundColorHex_value = previewBackgroundColorHex_default }
  document.board.previewBackgroundColorHex.value = previewBackgroundColorHex_value;

  if ((frameHeight_value = gup("frameHeight")) == "") { frameHeight_value = frameHeight_default }
  document.board.frameHeight.value = frameHeight_value;

  if ((frameWidth_value = gup("frameWidth")) == "") { frameWidth_value = frameWidth_default }
  document.board.frameWidth.value = frameWidth_value;

  if ((framePadding_value = gup("framePadding")) == "") { framePadding_value = framePadding_default }
  document.board.framePadding.value = framePadding_value;

  if ((baseUrl_value = gup("baseUrl")) == "") { baseUrl_value = baseUrl_default }
  document.board.baseUrl.value = baseUrl_value;

  generate_html_code();
  update_header_text_controls();
}

function reset_form() {
  if (confirm("do you really want to reset the form to the default values?\nAll your options including the PGN text will be lost!")) { set_defaults(); }
}

function update_header_text_controls() {
  update_disabled_controls();	
  update_suggested_iframe_dimensions();
}


function update_disabled_controls() {

  document.board.textMargin.disabled = (!document.board.showMoves.checked && !document.board.showHeader.checked);
  document.board.showComments.disabled = !document.board.showMoves.checked;
  document.board.showCommentsOnSeparateLines.disabled = !document.board.showMoves.checked;
  document.board.fontHeaderColorHex.disabled = !document.board.showHeader.checked;
  document.board.fontMovesColorHex.disabled = !document.board.showMoves.checked;
  document.board.fontCommentsColorHex.disabled = !document.board.showMoves.checked;
  document.board.highlightMoveColorHex.disabled = !document.board.showMoves.checked;
  document.board.fontHeaderSize.disabled = !document.board.showHeader.checked;
  document.board.fontMovesSize.disabled = !document.board.showMoves.checked;
  document.board.fontCommentsSize.disabled = !document.board.showMoves.checked;
}

function update_suggested_iframe_dimensions() {

  boardWidth = 8 * document.board.squareSize.value + 6; 
  suggested_frameWidth = boardWidth; 
  suggested_frameHeight = boardWidth; 
  
  if (document.board.showButtons.checked) { suggested_frameHeight += 50 }

  if (document.board.showHeader.checked) { suggested_frameHeight += Math.max(100, Math.round(0.2 * boardWidth)); }
  if (document.board.showMoves.checked) { suggested_frameHeight += Math.max(300, Math.round(0.8 * boardWidth)); }

  if (document.board.showHeader.checked || document.board.showMoves.checked) {
    suggested_frameWidth = Math.max(400, Math.round(1.5 * boardWidth));
  }

  suggested_frameWidth += 2 * parseInt(document.board.framePadding.value);
  suggested_frameHeight += 2 * parseInt(document.board.framePadding.value);

  document.getElementById('frameHeight_helpText').innerHTML = "if blank the frame height will be automatically assigned as " + suggested_frameHeight;
  document.getElementById('frameWidth_helpText').innerHTML = "if blank the frame width will be automatically assigned as " + suggested_frameWidth + " with a board width of " + boardWidth;

}

function update_pgnTextLength() {
 document.getElementById('pgnTextLength').innerHTML = document.getElementById('pgnText').value.length + " chars";
}


function calculate_html_code() {

  // this must be the firts item
  baseUrl_value = document.board.baseUrl.value;
  iframeUrl = baseUrl_value + "?";

  if (document.board.auto.checked) { auto_value = "t" } else { auto_value = "f" }
  delay_value = parseInt(document.board.delay.value);
  if (document.board.loop.checked) { loop_value = "t" } else { loop_value = "f" }
  iframeUrl += "&a=" + auto_value + "&d=" + delay_value + "&l=" + loop_value;

  pieceFont_value = document.board.pieceFont.value;
  pieceSize_value = parseInt(document.board.pieceSize.value);
  squareSize_value = parseInt(document.board.squareSize.value);
  if (pieceSize_value > squareSize_value) { alert("Error: the piece size (" + pieceSize_value + ") can not be bigger than the square size (" + squareSize_value + ")"); }
  iframeUrl += "&pf=" + pieceFont_value + "&ps=" + pieceSize_value + "&ss=" + squareSize_value;

  lightColorHex_value = document.board.lightColorHex.value; 
  darkColorHex_value = document.board.darkColorHex.value; 
  boardBorderColorHex_value = document.board.boardBorderColorHex.value; 
  highlightColorHex_value = document.board.highlightColorHex.value; 
  iframeUrl += "&lch=" + lightColorHex_value + "&dch=" + darkColorHex_value + "&bbch=" + boardBorderColorHex_value + "&hch=" + highlightColorHex_value;

  if (document.board.showButtons.checked) { showButtons_value = "t" } else { showButtons_value = "f" }
  iframeUrl += "&sb=" + showButtons_value;

  if (document.board.showHeader.checked) { showHeader_value = "t" } else { showHeader_value = "f" }
  if (document.board.showMoves.checked) { showMoves_value = "t" } else { showMoves_value = "f" }
  iframeUrl += "&sh=" + showHeader_value + "&sm=" + showMoves_value;

  if (document.board.showHeader.checked || document.board.showMoves.checked) {
    textMargin_value = document.board.textMargin.value;
    iframeUrl += "&tm=" + textMargin_value;
  }

  if (document.board.showHeader.checked) {
		  
    if (document.board.showComments.checked) { showComments_value = "t" } else { showComments_value = "f" } 
    if (document.board.showCommentsOnSeparateLines.checked) { showCommentsOnSeparateLines_value = "t" } else { showCommentsOnSeparateLines_value = "f" }
    iframeUrl += "&sc=" + showComments_value + "&scosl=" + showCommentsOnSeparateLines_value;

    fontHeaderColorHex_value =  document.board.fontHeaderColorHex.value
    iframeUrl += "&fhch=" + fontHeaderColorHex_value;

    fontHeaderSize_value =  document.board.fontHeaderSize.value
    iframeUrl += "&fhs=" + fontHeaderSize_value;

  }
		  
  if (document.board.showMoves.checked) {

    fontMovesColorHex_value =  document.board.fontMovesColorHex.value
    fontCommentsColorHex_value =  document.board.fontCommentsColorHex.value
    highlightMoveColorHex_value =  document.board.highlightMoveColorHex.value
    iframeUrl += "&fmch=" + fontMovesColorHex_value + "&fcch=" + fontCommentsColorHex_value + "&hmch=" + highlightMoveColorHex_value;

    fontMovesSize_value =  document.board.fontMovesSize.value
    fontCommentsSize_value =  document.board.fontCommentsSize.value
    iframeUrl += "&fms=" + fontMovesSize_value + "&fcs=" + fontCommentsSize_value;

  } 

  backgroundColorHex_value = document.board.backgroundColorHex.value;
  iframeUrl += "&bch=" + backgroundColorHex_value;

  // this does not go in the iframe
  previewBackgroundColorHex_value = document.board.previewBackgroundColorHex.value;

  update_suggested_iframe_dimensions();
  if ((frameHeight_value = document.board.frameHeight.value) == "") { frameHeight_value = suggested_frameHeight }
  if ((frameWidth_value = document.board.frameWidth.value) == "") { frameWidth_value = suggested_frameWidth }

  iframeUrl += "&fh=" + frameHeight_value + "&fw=" + "100%";

  framePadding_value = parseInt(document.board.framePadding.value);
  iframeUrl += "&fp=" + framePadding_value;

  if (document.board.tryPgnUrl.checked) { tryPgnUrl_value = "t" } else { tryPgnUrl_value = "f" }

  pgnText_value = document.getElementById('pgnText').value;
}

function pgnTextFixForUrl ( text ) {
  text = text.replace(/#/g,"++");
  text = text.replace(/'/g,"`");
  text = text.replace(/&/g," and ");
  text = text.replace(/\n/g," ");
  return text;
}

function new_pgnPointer () {
  date_key = new Date();
  digits_key = 10;
  random_key = Math.floor((Math.pow(10, digits_key) - Math.pow(10, digits_key - 1)) * Math.random() + Math.pow(10, digits_key - 1) );
  return date_key.getTime() + version + random_key;
}

function generate_html_code() {

  calculate_html_code();

  // here I have pgnText_value (without the necessary modifications to be in a URL), tryPgnText_value and iframeUrl (without the pgnText parameter

  useDiv = (tryPgnUrl_value != "t");

  if (tryPgnUrl_value == "t") {
    try_iframeUrl = iframeUrl + "&pt=" + pgnTextFixForUrl(pgnText_value);
    if (try_iframeUrl.length > iframeUrl_max) {
      useDiv = true;
    } else {
      iframeUrl = try_iframeUrl;
    }
  }

  html_code_string = "<!-- start of code from the pgn4web board-generator tool -->\n\n";

  if (useDiv) {
    pgnPointer_value = new_pgnPointer();
    iframeUrl += "&pp=" + pgnPointer_value;
    html_code_string += "<div id='" + pgnPointer_value + "' style='display: none'>\n\n" + pgnText_value + "\n\n</div>\n\n";
  }

  html_code_string += "<iframe frameborder=0 height=" + frameHeight_value +" width=" + frameWidth_value +" scrolling=no marginwidth=0 marginheight=0 src='" + iframeUrl + "'>your web browser does not support iframes as required to display the chessboard</iframe>";
  
  html_code_string += "\n\n<!-- end   of code from the pgn4web board-generator tool -->";

  document.getElementById('html_code').value = html_code_string;

  document.getElementById('preview').innerHTML = "<table bgcolor=#" + previewBackgroundColorHex_value + " width=100% cellpadding=20><tr><td align=center valign=middle> " + html_code_string + "</td></tr></table>";

  html_code_status_string = "<table width='100%' height='2em' cellspacing=5><tr><td align=left valign=top>";
  html_code_status_string += "HTML code ready to cut and paste in your page";

  if ((tryPgnUrl_value == "t") && useDiv) {
    html_code_status_string += ", but PGN too long to embed in URL, separate tag used instead";
  }

  if ( (document.getElementById('html_code').value.substring(document.getElementById('html_code').value.length - 61) != html_code_string.substring(html_code_string.length - 61)) || (document.getElementById('pgnText').value.length > pgn_textarea_max) ) {
    html_code_status_string += "<br>warning: very large PGN data, your browser might truncate the HTML code box. If you experience problems, try shortening your PGN data";
  }

  html_code_status_string += "</td><td align=right valign=top>";
  html_code_status_string += document.getElementById('pgnText').value.length + "p&nbsp;" + iframeUrl.length + "u&nbsp;" + html_code_string.length + "h";

  html_code_status_string += "</td></tr></table>";
  document.getElementById('html_code_status').innerHTML = html_code_status_string;
}

function gup( name ){

  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";  
  regexS = regexS+"(?!.*"+regexS+")"; // matches the LAST occurrence
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results != null ) { switch (results[1]) {
    case "true": case "T": return "t";  break;
    case "false": case "F": return "f"; break;
    default: return results[1];
  } }

  // allows for short version of the URL parameters, for instance sC matches squareColor
  compact_name = name.charAt(0);
  for(i=1; i<name.length; i++){
    if (name.charAt(i).match(/[A-Z]/)) { compact_name = compact_name + name.charAt(i).toLowerCase(); }
  }
  name = compact_name;

  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";  
  regexS = regexS+"(?!.*"+regexS+")"; // matches the LAST occurrence
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results != null ) { switch (results[1]) {
    case "true": case "T": return "t";  break;
    case "false": case "F": return "f"; break;
    default: return results[1];
  } }

  return "";
}

function bug_report() {
  var email = "pgn4web@casaschi.net";
  var subject = "pgn4web board generator bug report";
  var bug_info = "pgn4web board generator bug report\n\nURL: " + window.location + "\n\nuser agent: " + window.navigator.userAgent+ "\n\npgn4wev version: " + version + "\n\niFrame HTML code:\n\n" + html_code_string + "\n\nPlease add a description of the bug and dont forget to attach the screenshot.\n\n\n\n\n";
  mailto_link = 'mailto:' + email + '?subject=' + subject + '&body=' + escape(bug_info);

  win = window.open("", "bug_report", "resizable=yes,scrollbars=yes,toolbar=no,location=no,menubar=no"); 
  with (win.document) {
    open("text/html", "replace");
    write("<html>");
    write("<head><title>pgn4web bug report</title><style type='text/css'> html, body { font-family: sans-serif;  color: black; background: white } a {text-decoration: none; color: black; } </style></head>");
    write("<body>");
    write("<table width=100% cellspacing=0 cellpadding=0><tr><td align=left valign=middle><h1>pgn4web bug report</h1></td><td align=right valign=middle><a href=http://pgn4web.casaschi.net><img src=pawns.png border=0></a></td></tr></table><p>please make sure that:<ul><li>you are using the same web browser where you noticed the bug in the pgn4web board generator</li><li>you opened this bug report window from the pgn4web board generator page configured with all the parameter that result in the bug condition</li></ul>Then please email ALL the the debug information below and possibly a screenshot to <a href=mailto:pgn4web@casaschi.net>pgn4web@casaschi.net</a><p>");
    write("<hr>");
    write("<pre><code>" + bug_info.replace(/</g,"&lt;").replace(/>/g,"&gt;") + "</code></pre>");
    write("<hr>");
    write("<p>If your email client is properly configured, you can try to <i><a href='" + mailto_link + "'>click here and automatically compose the email in your default client</a></i> (this might not work, in case you have to create the email manually).<p>");
    write("</body>");
    write("<html>");
    close();
  }
}

function print_menu( item, level, title ) {

  menu =  '<table width=100% cellspacing=0 cellpadding=0><tr><td>';
  menu += '<h' + level + '><a name=' + item + '>' + title + '</a></h' + level + '>';
  menu += '</td><td valign=top>';
  menu += '<div style="font-size: 66%; text-align: right">';
  menu += '<a href=#instructions>instructions</a>';
  menu += '&nbsp; &nbsp;<span style="color:gray">actions:</span>';
  menu += '&nbsp; &nbsp;<a href=#generate>generate</a>';
  menu += '&nbsp; &nbsp;<a href=#game_preview>preview</a>';
  menu += '&nbsp; &nbsp;<span style="color:gray">config:</span>';
  menu += '&nbsp; &nbsp;<a href=#pgn_form>PGN</a>';
  menu += '&nbsp; &nbsp;<a href=#replay_options>replay</a>';
  menu += '&nbsp; &nbsp;<a href=#board_options>board</a>';
  menu += '&nbsp; &nbsp;<a href=#header_moves_options>header&moves</a>';
  menu += '&nbsp; &nbsp;<a href=#page_options>page</a>';
  menu += '</div>';
  menu += '</td></tr></table><p>';
  document.write(menu); 
}

window.onload = set_defaults;

</script>

<table width=100% cellspacing=0 cellpadding=0><tr>
<td align=left valign=middle>
<h1><a href=http://pgn4web.casaschi.net>pgn4web</a> chessboard generator</h1>
</td><td align=right valign=middle>
<a href=http://pgn4web.casaschi.net><img src=pawns.png border=0></a>
</td></tr></table>
<p>
<br>

<script>print_menu("instructions", 2, "instructions");</script>

<ol type="1">
<li><b>enter your PGN text</b> in the large textbox below; please note that the square brackets chars "[" "]" are not allowed by pgn4web in the PGN text outside the PGN header</li>
<li><b>modify any of the configuration options</b>, layout, colors and fonts</li>
<li><b>generate the HTML code</b> and <b>preview your chessboard</b></li>
<li><b>tune the configuration options</b> to your liking; check carefully the frame height/width values and be aware that different browser might render some items slightly bigger or smaller, so you should keep some margins</li>
<li>once happy with the preview chessboard, just <b>cut and paste the HTML code</b> from the yellow box into your web page or your blog</li>
<li>email to <i><a href=mailto:pgn4web@casaschi.net>pgn4web@casaschi.net</a></i> the address of your website or your blog</li>
<li>if something goes wrong, you might want to <i><a href="javascript:bug_report()">click here and <b>file a bug report</b></a></i></li>
</ol>
<p>
<br>

<form id="board" name="board" style="display:inline;" action="javascript:generate_html_code()">

<script>print_menu("generate HTML code", 2, "generate");</script>

<div style="font-style: italic; font-weight: bold; text-align: center; margin-bottom:6;">automatically generated HTML code for your web page or blog</div>
<textarea readonly id="html_code" name="html_code" rows=15 style="width: 100%; background-color: #FFFFAA"></textarea>
<div class='helptext' id="html_code_status">&nbsp;</div>
<p>
<br>

<table width=100% cellspacing=0 cellpadding=0><tr>
<td align=left valign=middle width="50%">
<input type="button" id="generate_html_code_button" name="generate_html_code_button" value="generate HTML code and update preview" onClick="generate_html_code()" style="width: 100%;"/>
</td><td width="25%">
</td><td align=right valign=middle width="25%">
<input type="button" id="reset_defaults_button" name="reset_defaults_button" value="reset form to default value" onClick="reset_form()" style="width: 100%;"/>
</td></tr></table>
<p>
<br>

<script>print_menu("game_preview", 2, "preview");</script>

<center>
<div id='preview'></div>
</center>
<p>
<br>

<h2>configuration options</h2>

<script>print_menu("pgn_form", 3, "chess game notation in PGN format");</script>

<textarea id=pgnText style="width: 100%;" rows=15 onChange="update_pgnTextLength()"></textarea>
<table cellspacing="0" cellpadding="0" width="100%"><tr>
<td align="left"><div class='helptext'>to avoid printing an header item please set the value to a space</div></td>
<td align="right"><div class="helptext" id="pgnTextLength"></div></td>
</tr></table>
<p>
<input type="checkbox" id="tryPgnUrl" name="tryPgnUrl" value="tryPgnUrl" />
&nbsp;&nbsp; try embedding PGN text in the URL &nbsp;&nbsp;
<div class="helptext">URL shorter than <script>document.write(iframeUrl_max);</script> chars can embed the PGN in the URL without separate tag</div>
<p>
<br>

<script>print_menu("replay_options", 3, "game replay options");</script>

<input type="checkbox" id="auto" name="auto" value="auto" />
&nbsp;&nbsp; autoplay game on page load &nbsp;&nbsp;
<p>

<select id="delay" name="delay">
<option value="1000">1</option>
<option value="2000">2</option>
<option value="3000">3</option>
<option value="5000">5</option>
<option value="10000">10</option>
<option value="300000">30</option>
</select>
&nbsp;&nbsp; autoplay delay (sec) &nbsp;&nbsp;
<p>

<input type="checkbox" id="loop" name="loop" value="loop" />
&nbsp;&nbsp; loop through games at game end &nbsp;&nbsp;
<p>
<br>

<script>print_menu("board_options", 3, "chessboard options");</script>

<select id="pieceFont" name="pieceFont">
<option value="alpha">alpha</option>
<option value="merida">merida</option>
<option value="uscf">uscf</option>
</select>
&nbsp;&nbsp; piece font &nbsp;&nbsp;
<p>

<select id="pieceSize" name="pieceSize">
<option value="20">20</option>
<option value="21">21</option>
<option value="22">22</option>
<option value="23">23</option>
<option value="24">24</option>
<option value="25">25</option>
<option value="26">26</option>
<option value="27">27</option>
<option value="28">28</option>
<option value="29">29</option>
<option value="30">30</option>
<option value="31">31</option>
<option value="32">32</option>
<option value="33">33</option>
<option value="34">34</option>
<option value="35">35</option>
<option value="36">36</option>
<option value="37">37</option>
<option value="38">38</option>
<option value="39">39</option>
<option value="40">40</option>
<option value="41">41</option>
<option value="42">42</option>
<option value="43">43</option>
<option value="44">44</option>
<option value="45">45</option>
<option value="46">46</option>
<option value="47">47</option>
<option value="48">48</option>
<option value="52">52</option>
<option value="56">56</option>
<option value="60">60</option>
<option value="64">64</option>
<option value="72">72</option>
<option value="80">80</option>
<option value="88">88</option>
<option value="96">96</option>
<option value="112">112</option>
<option value="128">128</option>
<option value="144">144</option>
<option value="300">300</option>
</select>
&nbsp;&nbsp; piece size &nbsp;&nbsp;
<p>

<input type="text" id="squareSize" name="squareSize" value="" size="7" onChange="update_suggested_iframe_dimensions()" />
&nbsp;&nbsp; square size &nbsp;&nbsp;
<p>
<br>

<input type="text" class="color" id="lightColorHex" name="lightColorHex" value="" size="7">
&nbsp;&nbsp; light squares color &nbsp;&nbsp;
<p>

<input type="text" class="color" id="darkColorHex" name="darkColorHex" value="" size="7">
&nbsp;&nbsp; dark squares color &nbsp;&nbsp;
<p>

<input type="text" class="color" id="boardBorderColorHex" name="boardBorderColorHex" value="" size="7">
&nbsp;&nbsp; board border color &nbsp;&nbsp;
<p>

<input type="text" class="color" id="highlightColorHex" name="highlightColorHex" value="" size="7">
&nbsp;&nbsp; highlight squares color &nbsp;&nbsp;
<p>
<br>

<input type="checkbox" id="showButtons" name="showButtons" value="showButtons" onChange="update_suggested_iframe_dimensions()" />
&nbsp;&nbsp; show control buttons &nbsp;&nbsp;
<span class="helptext">note that you might not need control buttons, just try clicking the G8 square</span>
<p>
<br>

<script>print_menu("header_moves_options", 3, "header and moves options");</script>

<input type="text" id="textMargin" name="textMargin" value="" size="7">
&nbsp;&nbsp; text margin &nbsp;&nbsp;
<span class="helptext"">margin at the left/right of the header/moves, nice to have if the text overflows with scrollbars</span>
<p>
<br>

<input type="checkbox" id="showHeader" name="showHeader" value="showHeader" onChange="update_header_text_controls()" />
&nbsp;&nbsp; <b>show game header</b> &nbsp;&nbsp;
<p>

<input type="text" id="fontHeaderSize" name="fontHeaderSize" value="" size="7" />
&nbsp;&nbsp; header font size &nbsp;&nbsp;
<p>

<input type="text" class="color" id="fontHeaderColorHex" name="fontHeaderColorHex" value="" size="7" />
&nbsp;&nbsp; header font color &nbsp;&nbsp;
<p>
<br>

<input type="checkbox" id="showMoves" name="showMoves" value="showMoves" onChange="update_header_text_controls()" />
&nbsp;&nbsp; <b>show game moves</b> &nbsp;&nbsp;
<p>

<input type="checkbox" id="showComments" name="showComments" value="showComments" />
&nbsp;&nbsp; show game comments &nbsp;&nbsp;
<p>

<input type="checkbox" id="showCommentsOnSeparateLines" name="showCommentsOnSeparateLines" value="showCommentsOnSeparateLines" />
&nbsp;&nbsp; show comments on separate lines &nbsp;&nbsp;
<p>

<input type="text" id="fontMovesSize" name="fontMovesSize" value="" size="7" />
&nbsp;&nbsp; moves font size &nbsp;&nbsp;
<p>

<input type="text" class="color" id="fontMovesColorHex" name="fontMovesColorHex" value="" size="7" />
&nbsp;&nbsp; moves font color &nbsp;&nbsp;
<p>

<input type="text" class="color" id="highlightMoveColorHex" name="highlightMoveColorHex" value="" size="7" />
&nbsp;&nbsp; highlight move color &nbsp;&nbsp;
<p>

<input type="text" id="fontCommentsSize" name="fontCommentsSize" value="" size="7" />
&nbsp;&nbsp; comments font size &nbsp;&nbsp;
<p>

<input type="text" class="color" id="fontCommentsColorHex" name="fontCommentsColorHex" value="" size="7" />
&nbsp;&nbsp; comments font color &nbsp;&nbsp;
<p>
<br>

<script>print_menu("page_options", 3, "web page options");</script>

<input type="text" class="color" id="backgroundColorHex" name="backgroundColorHex" value="" size="7" />
&nbsp;&nbsp; background color &nbsp;&nbsp;
<p>

<input type="text" class="color" id="previewBackgroundColorHex" name="previewBackgroundColorHex" value="" size="7" /> 
&nbsp;&nbsp; preview background &nbsp;&nbsp;
<span class="helptext"">not actually used in the HTML code, just for the preview</span>
<p>
<br>

<input type="text" id="frameHeight" name="frameHeight" value="" size="7" />
&nbsp;&nbsp; iFrame height &nbsp;&nbsp;
<span id="frameHeight_helpText" class="helptext"></span>
<p>

<input type="text" id="frameWidth" name="frameWidth" value="" size="7" /> 
&nbsp;&nbsp; iFrame width &nbsp;&nbsp;
<span id="frameWidth_helpText" class="helptext"></span>
<p>

<input type="text" id="framePadding" name="framePadding" value="" size="7" onChange="update_suggested_iframe_dimensions()"/>
&nbsp;&nbsp; iFrame padding &nbsp;&nbsp;
<span class="helptext">border padding around the iframe, included within the iFrame width value</span>
<p>
<br>

<!--

<h3><a name=url_options>URL options</a></h3>

base URL: &nbsp;&nbsp;
<input type="text" id="baseUrl" name="baseUrl" value="" style="width: 100%" />
<p>
<br>

-->

<input type="hidden" id="baseUrl" name="baseUrl" value="" style="width: 100%" />

<script>
inputWidth = document.getElementById('framePadding').offsetWidth;
document.getElementById('delay').style.width = inputWidth;
document.getElementById('pieceFont').style.width = inputWidth;
document.getElementById('pieceSize').style.width = inputWidth;

checkboxWidth = document.getElementById('showCommentsOnSeparateLines').offsetWidth;
document.getElementById('tryPgnUrl').style.marginLeft = inputWidth - checkboxWidth;
document.getElementById('auto').style.marginLeft = inputWidth - checkboxWidth;
document.getElementById('loop').style.marginLeft = inputWidth - checkboxWidth;
document.getElementById('showButtons').style.marginLeft = inputWidth - checkboxWidth;
document.getElementById('showHeader').style.marginLeft = inputWidth - checkboxWidth;
document.getElementById('showMoves').style.marginLeft = inputWidth - checkboxWidth;
document.getElementById('showComments').style.marginLeft = inputWidth - checkboxWidth;
document.getElementById('showCommentsOnSeparateLines').style.marginLeft = inputWidth - checkboxWidth;

document.write("<div style='text-align: right;' class='helptext'>pgn4web v" + version + "</div>")
</script>

</form>

</body>

</html>

